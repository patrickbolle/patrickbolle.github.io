<html>
<!-- Head tag -->
<head>
    <link rel="canonical" href="patrickbollenbach.com/tags/Socket-io/">
    <meta charset="utf-8">
    <meta content="shopify, freelance, partner, meteor, web dev, canadian, full stack, design, Canada, developer, vue, node" name="keywords">
    <meta content="Patrick Bollenbach" name="author">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Freelance web developer and Shopify Partner from Canada. Specializing in full stack development and ecommerce stores.">
    <link rel="icon" href="favicon/favicon.ico">
    <title>Patrick Bollenbach - Freelance Web Developer</title>
    <!-- Bulma + Fonts core CSS -->
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="/bulma.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-65909734-1', 'auto');
      ga('send', 'pageview');
    </script>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/animate.css">
</head>

<body>
  <!-- Hero header: will stick at the top -->
  <nav class="nav has-shadow animated fadeIn">
    <div class="container">
      <div class="nav-left">
        <a class="nav-item" href="/">
          <h3 class="navTitle title is-3 ">patrick bollenbach <small></small></h3>
        </a>
      </div>
      <span id="nav-toggle" class="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
      </span>
      <div id="nav-menu" class="nav-right nav-menu">
        <a href="/about" class="nav-item">
          About
        </a>
        <a href="/projects" class="nav-item">
          Projects
        </a>
        <a href="/blog" class="nav-item">
          Blog
        </a>
        <a class="button is-link nav-item navButton" href="/contact">
          Hire Me
        </a>
      </div>
    </div>
  </nav>

  <div class="container">
  <div class="container">
  <hr>
  <!-- Title -->
  <h1 class="title is-1">Blog <small></small></h1>
  <div class="columns">
    <div class="column is-three-quarters">
      <div class="container content">
        
        <div class="blog-post">

    <!-- Title -->
    <h2 class="blog title is-3">
        <a href="/vuejs-tutorial/">
            VueJS CRUD Tutorial with Socket.io, Express, RethinkDB
            <div class="subtitle is-5">2016-07-24</div>
        </a>
    </h2>
    <!-- Content -->
   <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>After learning Meteor and it’s easy to use, instantly reactive stack - I sought out to learn some of the other options out there in the Javascript world. I first went to learn React, as it had great Meteor integration. I built a few simple apps with React + Meteor, but I felt the lack of documentation and constantly changing opinions was a little bit confusing. I decided to ditch Meteor as a whole and attempt to learn the basics of “normal” SPA development with Mongo, Express, React and Node.<br>I learned a decent amount about React and it’s ecosystem, but I felt that it was a little bit daunting for a beginner in the Javascript world. So I looked into some other libraries and finally stumbled upon Vue JS. It seemed like the perfect mix between Meteor’s Blaze language and React’s component system - an extremely lightweight and reactive library for building “Modern Web Interfaces”.</p>
<p>With a new library to learn, I went to Google some basic CRUD tutorials based around Vue as the front end layer and found almost nothing giving a beginning to end step by step guide on how to make something as simple as a to do list. After spending a couple of weeks learning Vue, and integrating it with different databases other libraries, I’ve found a “perfect” stack for fast, reactive development :</p>
<ul>
<li>Vue (View layer)</li>
<li>Socket.io (Reactive Updates)</li>
<li>Express (Server/API)</li>
<li>RethinkDB (Database)</li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h4 id="Github-Repository-For-The-Tutorial-https-github-com-patrickbolle-vue-todo"><a href="#Github-Repository-For-The-Tutorial-https-github-com-patrickbolle-vue-todo" class="headerlink" title="Github Repository For The Tutorial :  https://github.com/patrickbolle/vue-todo"></a>Github Repository For The Tutorial :  <a href="https://github.com/patrickbolle/vue-todo" rel="external nofollow" target="_blank">https://github.com/patrickbolle/vue-todo</a></h4><p>We will be building a full stack todo list application. We will be using all of the CRUD (Create, Read, Update, Delete) functions and interacting with our RethinkDB database using an Express API, with a little bit of Socket.io to allow for reactive data.</p>
<p> First things first, please read the <a href="http://vuejs.org/guide/index.html" rel="external nofollow" target="_blank">VueJS Documentation</a> to get a better understanding of the concepts. They have done a great job with the documentation and my explanations will not be enough for you to understand Vue.</p>
<p>To begin, we will be installing Vue and it’s accompanying tool, Vue-CLI for scaffolding.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g vue-cli</div></pre></td></tr></table></figure></p>
<p>CD into whatever directory you would like to base your project out of. For me this is in a “Projects” folder.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd ~/Projects</div></pre></td></tr></table></figure></p>
<p>Now run the following command to initialize a new Vue project with a Webpack template :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vue init webpack vue-todolist</div></pre></td></tr></table></figure></p>
<p>You will be asked some basic questions regarding the project, like project name, description, linting, testing, etc.<br>I personally disable linting as I have Atom do that for me anyways automatically. As for testing, I will not be going over that in this tutorial, so disable it for the time being.</p>
<p>I’m still learning the ins and outs of webpack and everything in this project - but you can read the documentation for the template here, which will explain the file structure and extras thrown in : <a href="http://vuejs-templates.github.io/webpack/" rel="external nofollow" target="_blank">http://vuejs-templates.github.io/webpack/</a><br>Essentially what this will give us is a great start for a hot-reloading, production ready Vue application.</p>
<p>Now, cd into vue-todolist and run<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install</div></pre></td></tr></table></figure></p>
<p>This will install all the default packages included in the template, and get us ready to begin coding.<br>Now run<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run dev</div></pre></td></tr></table></figure></p>
<p>And Vue will begin to load! Navigate to localhost:8080 in your browser and you will see a basic info page from Vue :<br><img src="./vueinfo.png" alt="Vue JS Info Page"></p>
<h2 id="Extra-Dependencies"><a href="#Extra-Dependencies" class="headerlink" title="Extra Dependencies"></a>Extra Dependencies</h2><p>Although the webpack template gives us a great start, we will need to install a few more things to get a fully functioning CRUD app. We still need to install socket.io, RethinkDB, and in my case a CSS library (Bulma.io).<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install bulma rethinkdb rethinkdbdash socket.io --save</div></pre></td></tr></table></figure></p>
<p>Now we are ready to start coding!</p>
<h2 id="Set-Up-The-Express-Server"><a href="#Set-Up-The-Express-Server" class="headerlink" title="Set Up The Express Server"></a>Set Up The Express Server</h2><p>Before we begin coding, cancel the “npm run dev” command, open up another terminal and type:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rethinkdb</div></pre></td></tr></table></figure></p>
<p>This will start up the RethinkDB server, allowing our app to connect to it.</p>
<p>Open up dev-server.js, which is located in the /build/ directory of your project.<br>This file is run when you enter the “npm run dev” command to start your project, and it sets up a basic Express server by default.</p>
<p>We will be replacing the majority of the code in here, so let’s just delete everything in the file and paste the following inside:</p>
<p>These are our imports for the server file - pretty standard stuff, bringing in webpack, express, rethinkdb, socket.io, etc:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">const express = require(&apos;express&apos;)</div><div class="line">const r = require(&apos;rethinkdbdash&apos;)()</div><div class="line">const bodyParser = require(&apos;body-parser&apos;)</div><div class="line">const webpack = require(&apos;webpack&apos;)</div><div class="line">const config = require(&apos;./webpack.dev.conf.js&apos;)</div><div class="line">const _ = require(&apos;lodash&apos;)</div><div class="line">const sockio = require(&quot;socket.io&quot;);</div><div class="line"></div><div class="line">const app = express()</div><div class="line">const router = express.Router()</div><div class="line">const compiler = webpack(config)</div><div class="line">const jsonParser = bodyParser.json()</div></pre></td></tr></table></figure></p>
<p>Place the following lines under the imports. This initializes the webpack middleware allowing for hot-reloading and other fun webpack stuff :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// handle fallback for HTML5 history API</div><div class="line">app.use(require(&apos;connect-history-api-fallback&apos;)())</div><div class="line"></div><div class="line">// serve webpack bundle output</div><div class="line">app.use(require(&apos;webpack-dev-middleware&apos;)(compiler, &#123;</div><div class="line">  publicPath: config.output.publicPath,</div><div class="line">  stats: &#123;</div><div class="line">    colors: true,</div><div class="line">    chunks: false</div><div class="line">  &#125;</div><div class="line">&#125;))</div><div class="line"></div><div class="line">// enable hot-reload and state-preserving</div><div class="line">app.use(require(&apos;webpack-hot-middleware&apos;)(compiler))</div></pre></td></tr></table></figure></p>
<p>The rest of the file is Socket.io initialization and our Express API routes :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">var io = sockio.listen(app.listen(8099), &#123;log: false&#125;);</div><div class="line">console.log(&quot;Server started on port &quot; + 8099);</div><div class="line"></div><div class="line"></div><div class="line">//REST API FOR TASKS</div><div class="line">//GET - All Tasks</div><div class="line">router.get(&apos;/tasks&apos;, (req, res) =&gt; &#123;</div><div class="line">  r.table(&quot;tasks&quot;).orderBy(r.desc(&apos;createdAt&apos;)).run().then(result =&gt; &#123;</div><div class="line">    res.send(result)</div><div class="line">  &#125;).catch(err =&gt; &#123;</div><div class="line">    console.log(&quot;Error:&quot;, err)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">//POST - Create A New Task</div><div class="line">router.post(&apos;/tasks&apos;, jsonParser, (req, res) =&gt; &#123;</div><div class="line">  const task = &#123;</div><div class="line">    &apos;title&apos;: req.body.title,</div><div class="line">    &apos;createdAt&apos;: new Date().toJSON()</div><div class="line">  &#125;</div><div class="line">  r.table(&apos;tasks&apos;).insert(task).run().then(result =&gt; &#123;</div><div class="line">    res.send(result)</div><div class="line">    io.emit(&apos;taskInsert&apos;, result);</div><div class="line">  &#125;).catch(err =&gt; &#123;</div><div class="line">    console.log(&apos;Error:&apos;, err)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">//PUT - Update A Task</div><div class="line">router.put(&apos;/tasks/:id&apos;, (req, res) =&gt; &#123;</div><div class="line">  var newTitle = req.body.title</div><div class="line">  console.log(newTitle)</div><div class="line">  r.table(&quot;tasks&quot;).get(req.params.id).update(&#123;title: newTitle&#125;).run().then(result =&gt; &#123;</div><div class="line">    res.send(result)</div><div class="line">    io.emit(&apos;taskUpdate&apos;, result);</div><div class="line">  &#125;).catch(err =&gt; &#123;</div><div class="line">    console.log(&apos;Error:&apos;, err)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">//DELETE - Task</div><div class="line">router.delete(&apos;/tasks/:id&apos;, (req, res) =&gt; &#123;</div><div class="line">  console.log(req.params.id)</div><div class="line">  r.table(&quot;tasks&quot;).get(req.params.id).delete().run(function(err, result) &#123;</div><div class="line">        if (err) throw err;</div><div class="line">        io.emit(&apos;taskDelete&apos;, req.params.id);</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.use(&apos;/api&apos;, router)</div><div class="line">app.listen(8090, &apos;localhost&apos;, function (err) &#123;</div><div class="line">  if (err) &#123;</div><div class="line">    console.log(err)</div><div class="line">    return</div><div class="line">  &#125;</div><div class="line">  console.log(&apos;Listening at http://localhost:8090&apos;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>If this looks like complete gibberish to you, I highly suggest you take a look at the <a href="https://expressjs.com/en/starter/installing.html" rel="external nofollow" target="_blank">Express documentation</a>, which will give you a basic idea of how to set up API routes and what they do. We will be making use of the 4 main routes : GET, POST, PUT, DELETE.<br>Within each of these routes lives a database function. For example :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">router.get(&apos;/tasks&apos;, (req, res) =&gt; &#123;</div><div class="line">  r.table(&quot;tasks&quot;).orderBy(r.desc(&apos;createdAt&apos;)).run().then(result =&gt; &#123;</div><div class="line">    res.send(result)</div><div class="line">  &#125;).catch(err =&gt; &#123;</div><div class="line">    console.log(&quot;Error:&quot;, err)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>When we send a GET request to /tasks, we are going to grab data from the table “tasks”, ordered by date created, and then send the result back to the client.</p>
<p>You can learn more about RethinkDB here : <a href="https://www.rethinkdb.com/" rel="external nofollow" target="_blank">https://www.rethinkdb.com/</a></p>
<h4 id="Web-Sockets"><a href="#Web-Sockets" class="headerlink" title="Web Sockets"></a>Web Sockets</h4><p>Along with the standard Express API routes, you will see some lines sprinkled in referencing Socket.io. <a href="http://socket.io/" rel="external nofollow" target="_blank">Socket.io</a> brings real time data into our application. We import socket here:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">const sockio = require(&quot;socket.io&quot;);</div></pre></td></tr></table></figure></p>
<p> and here we initialize the socket instance:<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var io = sockio.listen(app.listen(8099), &#123;log: false&#125;);</div><div class="line">console.log(&quot;Server started on port &quot; + 8099);</div></pre></td></tr></table></figure></p>
<p>Now, whenever we make a change to the database - lets say with our POST request (inserting a task into the database) - we will send the result (the response from the database) through a socket to the client.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">io.emit(&apos;taskInsert&apos;, result);</div></pre></td></tr></table></figure></p>


   <!-- Only display the Read More link if we are displaying an excerpt -->
   
   <hr>

</div>

        
        
      </div>
    </div>
    <div class="column is-one-quarter" <aside="">
        <p class="menu-label">
          Site Categories
        </p>
        <ul class="menu-list">
          
          <li><a data-src="/categories/React/" href="#React" title="React">React</a></li>
          
          <li><a data-src="/categories/Tutorials/" href="#Tutorials" title="Tutorials">Tutorials</a></li>
          
        </ul>
        <p class="menu-label">
          Site Tags
        </p>
        <ul class="menu-list">
          
          <li><a data-src="/tags/Express/" href="#Express" title="Express">Express</a></li>
          
          <li><a data-src="/tags/Javascript/" href="#Javascript" title="Javascript">Javascript</a></li>
          
          <li><a data-src="/tags/Node/" href="#Node" title="Node">Node</a></li>
          
          <li><a data-src="/tags/React/" href="#React" title="React">React</a></li>
          
          <li><a data-src="/tags/RethinkDB/" href="#RethinkDB" title="RethinkDB">RethinkDB</a></li>
          
          <li><a data-src="/tags/Socket-io/" href="#Socket.io" title="Socket.io">Socket.io</a></li>
          
          <li><a data-src="/tags/Tutorial/" href="#Tutorial" title="Tutorial">Tutorial</a></li>
          
          <li><a data-src="/tags/Vue/" href="#Vue" title="Vue">Vue</a></li>
          
        </ul>
      
    </div>
  </div>
</div>

  </div>
  <script type="text/javascript">
    document.getElementById("nav-toggle").addEventListener ("click", toggleNav);
    function toggleNav() {
            var nav = document.getElementById("nav-menu");
            var className = nav.getAttribute("class");
            if(className == "nav-right nav-menu") {
                nav.className = "nav-right nav-menu is-active";
            } else {
                nav.className = "nav-right nav-menu";
            }
    }
</script>

</body>
</html>
