<html>
<!-- Head tag -->
<head>
    <link rel="canonical" href="patrickbollenbach.com/tags/RethinkDB/"/>
    <meta charset="utf-8">
    <meta content="shopify, freelance, partner, meteor, web dev, canadian, full stack, design, Canada" name="keywords">
    <meta content="Patrick Bollenbach" name="author">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Freelance web developer and Shopify Partner from Canada. Specializing in full stack development and ecommerce stores.">
    <link rel="icon" href="favicon/favicon.ico">
    <title>Patrick Bollenbach - Freelance Web Developer</title>
    <!-- Bulma + FontAwesome core CSS -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Slider -->
    <link rel="stylesheet" href="/bulma.css">
    <link rel="stylesheet" href="/styles.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-65909734-1', 'auto');
      ga('send', 'pageview');

    </script>
</head>

<body>
      <nav class="nav">
    <div class="container">
      <div class="nav-left">
        <a class="nav-item" href="/">
          <h4 class="subtitle is-4">patrick bollenbach</h4>
        </a>
      </div>

      <span class="nav-toggle" id="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
      </span>

      <div class="nav-right nav-menu" id="nav-menu">
        
            <a class="nav-item" href="/">Home</a>
        
            <a class="nav-item" href="/projects">Projects</a>
        
            <a class="nav-item" href="/about">About</a>
        
            <a class="nav-item" href="/contact">Contact</a>
        
            <a class="nav-item" href="/blog">Blog</a>
        
      </div>
    </div>
  </nav>

    <div class="container-fluid">
        <div class="container">
  <!-- Title -->
  <div class="container">
    <h1 class="title is-3">
      Blog
      <hr>
    </h1>
  </div>
  <div class="columns">
    <div class="column is-three-quarters">
      <div class="container content">
        
        <div class="blog-post">

    <!-- Title -->
    <h2 class="blog title is-3">
        <a href="/vuejs-tutorial/">
            VueJS CRUD Tutorial with Socket.io, Express, RethinkDB
            <div class="subtitle is-5">2016-07-24</div>
        </a>
    </h2>
    <!-- Content -->
   <p><img src="./vuejs.jpeg" alt="Vue JS Info Page"></p><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>After learning Meteor and it’s easy to use, instantly reactive stack - I sought out to learn some of the other options out there in the Javascript world. I first went to learn React, as it had great Meteor integration. I built a few simple apps with React + Meteor, but I felt the lack of documentation and constantly changing opinions was a little bit confusing. I decided to ditch Meteor as a whole and attempt to learn the basics of “normal” SPA development with Mongo, Express, React and Node.<br>I learned a decent amount about React and it’s ecosystem, but I felt that it was a little bit daunting for a beginner in the Javascript world. So I looked into some other libraries and finally stumbled upon Vue JS. It seemed like the perfect mix between Meteor’s Blaze language and React’s component system - an extremely lightweight and reactive library for building “Modern Web Interfaces”.</p><p>With a new library to learn, I went to Google some basic CRUD tutorials based around Vue as the front end layer and found almost nothing giving a beginning to end step by step guide on how to make something as simple as a to do list. After spending a couple of weeks learning Vue, and integrating it with different databases other libraries, I’ve found a “perfect” stack for fast, reactive development :</p><ul><li>Vue (View layer)</li><li>Socket.io (Reactive Updates)</li><li>Express (Server/API)</li><li>RethinkDB (Database)</li></ul><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h4 id="Github-Repository-For-The-Tutorial-https-github-com-patrickbolle-vue-todo"><a href="#Github-Repository-For-The-Tutorial-https-github-com-patrickbolle-vue-todo" class="headerlink" title="Github Repository For The Tutorial :  https://github.com/patrickbolle/vue-todo"></a>Github Repository For The Tutorial : <a href="https://github.com/patrickbolle/vue-todo" rel="external nofollow" target="_blank">https://github.com/patrickbolle/vue-todo</a></h4><p>We will be building a full stack todo list application. We will be using all of the CRUD (Create, Read, Update, Delete) functions and interacting with our RethinkDB database using an Express API, with a little bit of Socket.io to allow for reactive data.</p><h5 id="First-things-first-please-read-the-VueJS-Documentation-to-get-a-better-understanding-of-the-concepts-They-have-done-a-great-job-with-the-documentation-and-my-explanations-will-not-be-enough-for-you-to-understand-Vue"><a href="#First-things-first-please-read-the-VueJS-Documentation-to-get-a-better-understanding-of-the-concepts-They-have-done-a-great-job-with-the-documentation-and-my-explanations-will-not-be-enough-for-you-to-understand-Vue" class="headerlink" title="First things first, please read the VueJS Documentation to get a better understanding of the concepts. They have done a great job with the documentation and my explanations will not be enough for you to understand Vue."></a>First things first, please read the <a href="http://vuejs.org/guide/index.html" rel="external nofollow" target="_blank">VueJS Documentation</a> to get a better understanding of the concepts. They have done a great job with the documentation and my explanations will not be enough for you to understand Vue.</h5><p>To begin, we will be installing Vue and it’s accompanying tool, Vue-CLI for scaffolding.<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g vue-cli</span><br></pre></td></tr></table></figure><p></p><p>CD into whatever directory you would like to base your project out of. For me this is in a “Projects” folder.<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/Projects</span><br></pre></td></tr></table></figure><p></p><p>Now run the following command to initialize a new Vue project with a Webpack template :<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack vue-todolist</span><br></pre></td></tr></table></figure><p></p><p>You will be asked some basic questions regarding the project, like project name, description, linting, testing, etc.<br>I personally disable linting as I have Atom do that for me anyways automatically. As for testing, I will not be going over that in this tutorial, so disable it for the time being.</p><p>I’m still learning the ins and outs of webpack and everything in this project - but you can read the documentation for the template here, which will explain the file structure and extras thrown in : <a href="http://vuejs-templates.github.io/webpack/" rel="external nofollow" target="_blank">http://vuejs-templates.github.io/webpack/</a><br>Essentially what this will give us is a great start for a hot-reloading, production ready Vue application.</p><p>Now, cd into vue-todolist and run<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p></p><p>This will install all the default packages included in the template, and get us ready to begin coding.<br>Now run<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p></p><p>And Vue will begin to load! Navigate to localhost:8080 in your browser and you will see a basic info page from Vue :<br><img src="./vueinfo.png" alt="Vue JS Info Page"></p><h2 id="Extra-Dependencies"><a href="#Extra-Dependencies" class="headerlink" title="Extra Dependencies"></a>Extra Dependencies</h2><p>Although the webpack template gives us a great start, we will need to install a few more things to get a fully functioning CRUD app. We still need to install socket.io, RethinkDB, and in my case a CSS library (Bulma.io).<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install bulma rethinkdb rethinkdbdash socket.io --save</span><br></pre></td></tr></table></figure><p></p><p>Now we are ready to start coding!</p><h2 id="Set-Up-The-Express-Server"><a href="#Set-Up-The-Express-Server" class="headerlink" title="Set Up The Express Server"></a>Set Up The Express Server</h2><p>Before we begin coding, cancel the “npm run dev” command, open up another terminal and type:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rethinkdb</span><br></pre></td></tr></table></figure><p></p><p>This will start up the RethinkDB server, allowing our app to connect to it.</p><p>Open up dev-server.js, which is located in the /build/ directory of your project.<br>This file is run when you enter the “npm run dev” command to start your project, and it sets up a basic Express server by default.</p><p>We will be replacing the majority of the code in here, so let’s just delete everything in the file and paste the following inside:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;)</span><br><span class="line">const r = require(&apos;rethinkdbdash&apos;)()</span><br><span class="line">const bodyParser = require(&apos;body-parser&apos;)</span><br><span class="line">const webpack = require(&apos;webpack&apos;)</span><br><span class="line">const config = require(&apos;./webpack.dev.conf.js&apos;)</span><br><span class="line">const _ = require(&apos;lodash&apos;)</span><br><span class="line">const sockio = require(&quot;socket.io&quot;);</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line">const router = express.Router()</span><br><span class="line">const compiler = webpack(config)</span><br><span class="line">const jsonParser = bodyParser.json()</span><br><span class="line"></span><br><span class="line">// handle fallback for HTML5 history API</span><br><span class="line">app.use(require(&apos;connect-history-api-fallback&apos;)())</span><br><span class="line"></span><br><span class="line">// serve webpack bundle output</span><br><span class="line">app.use(require(&apos;webpack-dev-middleware&apos;)(compiler, &#123;</span><br><span class="line">  publicPath: config.output.publicPath,</span><br><span class="line">  stats: &#123;</span><br><span class="line">    colors: true,</span><br><span class="line">    chunks: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">// enable hot-reload and state-preserving</span><br><span class="line">app.use(require(&apos;webpack-hot-middleware&apos;)(compiler))</span><br><span class="line"></span><br><span class="line">var io = sockio.listen(app.listen(8099), &#123;log: false&#125;);</span><br><span class="line">console.log(&quot;Server started on port &quot; + 8099);</span><br><span class="line"></span><br><span class="line">// Set socket.io listeners.</span><br><span class="line">io.on(&apos;connection&apos;, (socket) =&gt; &#123;</span><br><span class="line">  console.log(&apos;a user connected&apos;);</span><br><span class="line">  socket.on(&apos;disconnect&apos;, () =&gt; &#123;</span><br><span class="line">    console.log(&apos;user disconnected&apos;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//REST API FOR TASKS</span><br><span class="line">//GET - All Tasks</span><br><span class="line">router.get(&apos;/tasks&apos;, (req, res) =&gt; &#123;</span><br><span class="line">  r.table(&quot;tasks&quot;).orderBy(r.desc(&apos;createdAt&apos;)).run().then(result =&gt; &#123;</span><br><span class="line">    res.send(result)</span><br><span class="line">  &#125;).catch(err =&gt; &#123;</span><br><span class="line">    console.log(&quot;Error:&quot;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//POST - Create A New Task</span><br><span class="line">router.post(&apos;/tasks&apos;, jsonParser, (req, res) =&gt; &#123;</span><br><span class="line">  const task = &#123;</span><br><span class="line">    &apos;title&apos;: req.body.title,</span><br><span class="line">    &apos;createdAt&apos;: new Date().toJSON()</span><br><span class="line">  &#125;</span><br><span class="line">  r.table(&apos;tasks&apos;).insert(task).run().then(result =&gt; &#123;</span><br><span class="line">    res.send(result)</span><br><span class="line">    io.emit(&apos;taskInsert&apos;, result);</span><br><span class="line">  &#125;).catch(err =&gt; &#123;</span><br><span class="line">    console.log(&apos;Error:&apos;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//PUT - Update A Task</span><br><span class="line">router.put(&apos;/tasks/:id&apos;, (req, res) =&gt; &#123;</span><br><span class="line">  var newTitle = req.body.title</span><br><span class="line">  console.log(newTitle)</span><br><span class="line">  r.table(&quot;tasks&quot;).get(req.params.id).update(&#123;title: newTitle&#125;).run().then(result =&gt; &#123;</span><br><span class="line">    res.send(result)</span><br><span class="line">    io.emit(&apos;taskUpdate&apos;, result);</span><br><span class="line">  &#125;).catch(err =&gt; &#123;</span><br><span class="line">    console.log(&apos;Error:&apos;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//DELETE - Task</span><br><span class="line">router.delete(&apos;/tasks/:id&apos;, (req, res) =&gt; &#123;</span><br><span class="line">  console.log(req.params.id)</span><br><span class="line">  r.table(&quot;tasks&quot;).get(req.params.id).delete().run(function(err, result) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        io.emit(&apos;taskDelete&apos;, req.params.id);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(&apos;/api&apos;, router)</span><br><span class="line">app.listen(8090, &apos;localhost&apos;, function (err) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    console.log(err)</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&apos;Listening at http://localhost:8090&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>If this looks like complete gibberish to you, I highly suggest you take a look at the Express documentation, which will give you a basic idea of how to set up API routes and what they do. We will be making use of the 4 main routes : GET, POST, PUT, DELETE.<br>Within each of these routes lives a database function. For example :<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">router.get(&apos;/tasks&apos;, (req, res) =&gt; &#123;</span><br><span class="line">  r.table(&quot;tasks&quot;).orderBy(r.desc(&apos;createdAt&apos;)).run().then(result =&gt; &#123;</span><br><span class="line">    res.send(result)</span><br><span class="line">  &#125;).catch(err =&gt; &#123;</span><br><span class="line">    console.log(&quot;Error:&quot;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>When we send a GET request to /tasks, we are going to grab data from the table “tasks”, ordered by date created, and then send the result back to the client.</p><p>You can learn more about RethinkDB here : <a href="https://www.rethinkdb.com/" rel="external nofollow" target="_blank">https://www.rethinkdb.com/</a></p><h1 id="TO-BE-CONTINUED-…"><a href="#TO-BE-CONTINUED-…" class="headerlink" title="TO BE CONTINUED …"></a>TO BE CONTINUED …</h1>

   <!-- Only display the Read More link if we are displaying an excerpt -->
   
   <hr>

</div>

        
        
      </div>
    </div>
    <div class="column is-one-quarter"
      <aside class="menu">
        <p class="menu-label">
          Site Categories
        </p>
        <ul class="menu-list">
          
          <li><a data-src="/categories/React/" href="#React" title="React">React</a></li>
          
          <li><a data-src="/categories/Tutorials/" href="#Tutorials" title="Tutorials">Tutorials</a></li>
          
        </ul>
        <p class="menu-label">
          Site Tags
        </p>
        <ul class="menu-list">
          
          <li><a data-src="/tags/Express/" href="#Express" title="Express">Express</a></li>
          
          <li><a data-src="/tags/Javascript/" href="#Javascript" title="Javascript">Javascript</a></li>
          
          <li><a data-src="/tags/Node/" href="#Node" title="Node">Node</a></li>
          
          <li><a data-src="/tags/React/" href="#React" title="React">React</a></li>
          
          <li><a data-src="/tags/RethinkDB/" href="#RethinkDB" title="RethinkDB">RethinkDB</a></li>
          
          <li><a data-src="/tags/Socket-io/" href="#Socket.io" title="Socket.io">Socket.io</a></li>
          
          <li><a data-src="/tags/Tutorial/" href="#Tutorial" title="Tutorial">Tutorial</a></li>
          
          <li><a data-src="/tags/Vue/" href="#Vue" title="Vue">Vue</a></li>
          
          <li><a data-src="/tags/Vue-RethinkDB-Express-Socket-io-Node/" href="#Vue, RethinkDB, Express, Socket.io, Node" title="Vue, RethinkDB, Express, Socket.io, Node">Vue, RethinkDB, Express, Socket.io, Node</a></li>
          
        </ul>
      </aside>
    </div>
  </div>
</div>

    </div>
    <script type="text/javascript">
    document.getElementById("nav-toggle").addEventListener("click", toggleNav);
    function toggleNav() {
            var nav = document.getElementById("nav-menu");
            var className = nav.getAttribute("class");
            if(className == "nav-right nav-menu") {
                nav.className = "nav-right nav-menu is-active";
            } else {
                nav.className = "nav-right nav-menu";
            }
    }
</script>

    <footer class="footer">
  <div class="container">
    <div class="content has-text-centered white">
      <p>
        Built by Patrick Bollenbach
      </p>
      <p class="white">
        <a class="icon" href="https://github.com/patrickbolle">
          <i class="fa fa-github"></i>
        </a>
        <a class="icon" href="https://twitter.com/patrickbolle">
          <i class="fa fa-twitter"></i>
        </a>
        <a class="icon" href="https://linkedin.com/patrickbolle">
          <i class="fa fa-linkedin"></i>
        </a>
      </p>
    </div>
  </div>
</footer>

</body>
</html>
